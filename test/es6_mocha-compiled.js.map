{"version":3,"sources":["es6_mocha.js"],"names":[],"mappings":"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","file":"es6_mocha-compiled.js","sourcesContent":["var co    = require('co');\r\nvar mocha = require('mocha');\r\n\r\n\r\nmocha.Runnable.prototype.run = function(fn) {\r\n    var self = this\r\n        , ms = this.timeout()\r\n        , start = new Date\r\n        , ctx = this.ctx\r\n        , finished\r\n        , emitted;\r\n\r\n    if (ctx) ctx.runnable(this);\r\n\r\n    // timeout\r\n    if (this.async) {\r\n        if (ms) {\r\n            this.timer = setTimeout(function(){\r\n                done(new Error('timeout of ' + ms + 'ms exceeded'));\r\n                self.timedOut = true;\r\n            }, ms);\r\n        }\r\n    }\r\n\r\n    // called multiple times\r\n    function multiple(err) {\r\n        if (emitted) return;\r\n        emitted = true;\r\n        self.emit('error', err || new Error('done() called multiple times'));\r\n    }\r\n\r\n    // finished\r\n    function done(err) {\r\n        if (self.timedOut) return;\r\n        if (finished) return multiple(err);\r\n        self.clearTimeout();\r\n        self.duration = new Date - start;\r\n        finished = true;\r\n        fn(err);\r\n    }\r\n\r\n    // for .resetTimeout()\r\n    this.callback = done;\r\n\r\n    // async\r\n    if (this.async) {\r\n        try {\r\n            this.fn.call(ctx, function(err){\r\n                if (err instanceof Error || toString.call(err) === \"[object Error]\") return done(err);\r\n                if (null != err) return done(new Error('done() invoked with non-Error: ' + err));\r\n                done();\r\n            });\r\n        } catch (err) {\r\n            done(err);\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (this.asyncOnly) {\r\n        return done(new Error('--async-only option in use without declaring `done()`'));\r\n    }\r\n\r\n    try {\r\n        if (!this.pending) {\r\n            var result = this.fn.call(ctx);\r\n            // This is where we determine if the result is a generator\r\n            if (result && typeof(result.next) == 'function' && typeof(result.throw) == 'function') {\r\n                // Mocha timeout for async function\r\n                if (ms) {\r\n                    this.timer = setTimeout(function(){\r\n                        done(new Error('timeout of ' + ms + 'ms exceeded'));\r\n                        self.timedOut = true;\r\n                    }, ms);\r\n                }\r\n                // Use co to run generator to completion\r\n                co(result)(function(err) {\r\n                    this.duration = new Date - start;\r\n                    done(err);\r\n                });\r\n            } else {\r\n                // Default Mocha handling of sync function\r\n                this.duration = new Date - start;\r\n                fn();\r\n            }\r\n        }\r\n    } catch (err) {\r\n        fn(err);\r\n    }\r\n\r\n}"]}